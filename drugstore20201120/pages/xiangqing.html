<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/xiangqing.css">
    <link rel="stylesheet" href="../lib/font_2218841_aakpu43li9i/iconfont.css">
    <script src="../lib/node_modules/jquery/dist/jquery.js"></script>

</head>

<body>

    <div class="bigbox">

        <!-- 顶部 Start-->
        <div class="HeaderTopContainer">
            <div class="main">
                <!-- 国旗 -->
                <div class="top">
                    <div class="header-left">
                        <a href="#">
                            <img src="https://po-assets.azoyacdn.com/skin/frontend/PlumTree/po_pc_v2/images/flag.png"
                                alt="">
                            <span>English Site</span>
                        </a>
                    </div>
                    <!-- 咨询 -->
                    <div class="consultative">
                        <p>客服咨询</p>
                        <ul>
                            <li>
                                <i class="iconfont">&#xe65c;</i>
                                <span>客服邮箱</span>
                            </li>
                            <li>
                                <i class="iconfont">&#xe600;</i>
                                <span>在线客服</span>
                            </li>
                        </ul>
                    </div>
                    <!-- 头部右侧 -->
                    <div class="header-right">
                        <a href="./login.html" class="login">登录</a>
                        <a href="./zhuce.html" class="regsteir">注册</a>
                        <span>|</span>
                        <a href="#" class="my-order">我的订单</a>
                        <a href="#" class="personal">个人中心</a>
                        <a href="#" class="favour">我的收藏夹</a>
                        <a href="#" class="focusus">
                            关注我们
                            <div class="about">
                                <div class="about-left">
                                    <img src="https://po-assets.azoyacdn.com/skin/frontend/PlumTree/po_pc_v2/images/logo/wxcode.png"
                                        alt="">
                                    <p>关注PO微信</p>
                                </div>
                                <div class="about-right">
                                    <img src="https://po-assets.azoyacdn.com/skin/frontend/PlumTree/po_pc_v2/images/logo/wbo.png"
                                        alt="">
                                    <p>关注PO微博</p>
                                </div>

                            </div>
                        </a>
                        <a href="#">帮助</a>
                        <a href="#">消费者告知书</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 顶部 end--->
        <!-- --------------------------------搜索部分 Start------------------------------    -->
        <div class="HeaderMiddle">
            <div class="main">
                <a href="#">
                    <img src="https://po-assets.azoyacdn.com/skin/frontend/PlumTree/po_pc_v2/images/logo/logo.png"
                        alt="">
                </a>
                <div class="HeaderLogoDesc">
                    <img src="https://po-assets.azoyacdn.com/skin/frontend/PlumTree/po_pc_v2/images/slogan-new.png"
                        alt="">
                </div>
                <!-- 搜索框部分 -->
                <div class="search_grid ">
                    <div class="search_box">
                        <div><i class="iconfont">&#xe61b;</i></div>
                        <input type="text" placeholder="Eaoion">
                        <button>搜索</button>
                    </div>
                    <div class="hot-search">
                        <div class="hot-search-box">
                            <div class="hot">热门搜索</div>
                            <div>
                                <p>A2</p>
                            </div>
                            <div>
                                <p>面膜</p>
                            </div>
                            <div>
                                <p>Unichi</p>
                            </div>
                            <div>
                                <p>bio island</p>
                            </div>
                            <div>
                                <p>cemoy</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 购物车按钮 -->
                <a href="./cart.html" class="cart">
                    <i class="iconfont cart-img">&#xe6d8;</i>
                    <span>我的购物车</span>
                </a>
            </div>
        </div>
        <!-- --------------------------------搜索部分 end------------------------------    -->
        <!-- 导航栏 Start -->
        <div class="nav">
            <div class="main">
                <div class="new-online">
                    <ul class="new-list">
                        <li>
                            <a href="#" class="nav-list">必入尖货 </a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">新品上线</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">营养保健 </a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">母婴产品</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">美妆个护</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">洗护日用</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">家庭常备</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">健康辅助</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">食品饮料</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">宠物护理</a>
                        </li>
                        <li>
                            <a href="#" class="nav-list">品牌A-Z</a>
                        </li>
                    </ul>

                    <!-- 显示模块 -->
                    <div class="show">
                        <div class="show-left">
                            <div class="show-left-title">
                                <h3>健康补充</h3>
                                <ul>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                </ul>
                            </div>
                            <div class="show-left-title">
                                <h3>健康补充</h3>
                                <ul>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                    <li><a href="#">葡萄籽</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="show-right">
                            <h3>热门品牌</h3>
                            <ul class="img-list">
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>
                                <li><img src="https://po-assets.azoyacdn.com/media/wysiwyg/slides/brand-logo/SWISSE170328-110x60.jpg"
                                        alt=""></li>

                            </ul>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 导航栏 end -->
        <!-- 面包屑 Start -->
        <div class="Bread-crumbs-box">
            <div class="main">
                <div class="Bread-crumbs">
                    <ul>
                        <li>主页</li>
                        <li>
                            >
                        </li>
                        <li>
                            <a href="#">Eaoron 抗糖小气泡嫩白祛黄深层清洁修护氧气泡泡面膜 25ml*7片装</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- 面包屑 end-->

        <div class="main">
            <!-- 放大镜盒子Start -->
            <div class="magnifier-box">
                <!-- 左盒子 -->
                <div class="magnifier-left">
                    <div class="showcase">
                        <!-- <img class="datu" src="../imgs/imgs-pc/1.jpg" alt="">
                        <div class="mark"></div>
                        <div class="show-right">
                            <img src="../imgs/imgs-pc/1.jpg" alt="">
                        </div>

                        <div class="Small-picture">
                            <img src="../imgs/imgs-pc/1.jpg">
                            <img src="../imgs/imgs-pc/2.jpg">
                            <img src="../imgs/imgs-pc/3.jpg">
                            <img src="../imgs/imgs-pc/4.jpg">
                            <img src="../imgs/imgs-pc/5.jpg"> 
                        </div> -->
                    </div>
                </div>

                <!-- 右盒子 -->
                <div class="magnifier-right">
                    <!-- <a href="#" class="Brand"><img
                            src="https://brand-assets.azoyacdn.com/media/catalog/product/1/1/11.jpg?imageMogr2/thumbnail/96x48/extent/96x48/background/d2hpdGU="
                            alt=""></a>
                    <h1 class="Brand-title">【预售】Eaoron 抗糖小气泡嫩白祛黄深层清洁修护氧气泡泡面膜 25ml*7片装</h1>
                    <p class="empty"></p>  -->

                    <!-- 价格盒子 top -->
                    <div class="price-information">
                        <div class="Sale-price">
                            <div class="Promotion">促销价</div>
                            <div class="Promotion-content">
                                <b>AU$<i>12.36</i></b>
                                <span class="discount">5.3折</span>
                                <span class="proposed-price">参考价：￥76.63</span>
                            </div>
                        </div>
                        <div class="Original-price">
                            <div class="old">
                                原价
                            </div>
                            <div class="old-price">
                                <span>AU$56.78</span>
                            </div>

                        </div>

                    </div>
                    <!-- 价格盒子 bottom -->
                    <!-- 满减优惠  活动 top-->
                    <div class="custommot-proion">
                        <div class="hd">
                            <p>活动</p>
                        </div>
                        <div class="hd-content">
                            <p>满89澳免邮2kg，满119澳再减8澳<a href="#">查看更多>></a></p>
                            <p>爆款奶粉限时到货<a href="#">查看更多>></a></p>
                            <p>新品尝鲜低至52折<a href="#">查看更多>></a></p>
                            <p>热销排行33折起<a href="#">查看更多>></a></p>

                        </div>

                    </div>
                    <!-- 满减优惠 活动 bottom-->

                    <!--  税费top -->
                    <div class="Taxes">
                        <div class="sf">
                            <p>税费</p>
                        </div>
                        <div class="sf-content">
                            <p>所有商品价格已包含进口税费，您无需额外支付税费</p>
                        </div>
                    </div>
                    <!-- 税费 bottom -->

                    <!-- 发货 top -->
                    <div class="Ship">
                        <div class="fh">
                            <p>发货</p>
                        </div>
                        <div class="fh-content">
                            <p>正常情况下，预计派送时效为10-15个工作日</p>
                        </div>
                    </div>

                    <!-- 发货  bottom-->

                    <!-- 数量  Start-->
                    <div class="Quantity">
                        <div class="sl">
                            <p>数量</p>
                        </div>
                        <div class="sl-content">
                            <input type="button" value="-" class="sub">
                            <input type="text" value="1" class="txt">
                            <input type="button" value="+" class="add">
                            <span>商品限购<b>2</b>件</span>
                        </div>

                    </div>
                    <!-- 数量  end-->

                    <!-- 加入购物车收藏Start -->
                    <div class="Shopping-Cart">
                        <!-- <div class="Cart">加入购物车</div>
                        <div class="collect ">收藏</div> -->

                    </div>

                </div>

            </div>
            <!-- 放大镜盒子end -->

            <!-- 相关推荐 Star -->
            <div class="related">
                <p>相关推荐</p>
            </div>
            <!-- 相关推荐 end  -->
        </div>
    </div>



    <!-- 放大镜 jquery -->
    <script>
        $(function () {

            // -------------------------------------------------------------------------------------------

            //  //获取地址栏中是否有参数
            var ids = location.search
            //    console.log(ids)
            if (ids) {
                //获取id值
                var mm = ids.split('=')[1]
                console.log(mm)
                //ajax发送请求，并获取响应
                $.ajax({
                    url: "../json/new-shopping.json",
                    type: "get",
                    dataType: "json",
                    success: function (json) {
                        var Str = ''
                        var Str2 = ''
                        var Str3 = ''
                        $.each(json, function (index, item) {
                            //  console.log(JSON.stringify(item.id))
                            // console.log(mm===JSON.stringify(item.id))

                            if (mm === JSON.stringify(item.id)) {
                                Str += ` 
                            <img class="datu" src="${item.imgs}" alt="">
                            <div class="mark"></div>
                            <div class="show-right">
                                <img src="${item.imgs}" alt="">
                            </div>

                            <div class="Small-picture">
                                <img src="${item.imgs}">
                        
                            </div>                                         
                                
                                `,

                                    Str2 += `
                                    <a href="#" class="Brand"><img
                                    src="https://brand-assets.azoyacdn.com/media/catalog/product/1/1/11.jpg?imageMogr2/thumbnail/96x48/extent/96x48/background/d2hpdGU="
                                    alt=""></a>
                                    <h1 class="Brand-title">${item.title}</h1>
                                    <p class="empty"></p> 
                            `,
                                    Str3 += `
                            <div class="Cart" id="${item.id}">加入购物车</div>
                            <div class="collect ">收藏</div>
                            `


                            }
                        })

                        $('.showcase').html(Str)
                        $('.price-information').before().html(Str2)
                        $('.Shopping-Cart').html(Str3)
                    }
                })

            }

            // -----------------------------------------------------------------------------------------------------
            //鼠标移入产品小图事件
            $(".Small-picture img").mouseenter(function () {//鼠标悬浮在不同的产品小图片时外加黑色边框并且主图将其显示出来
                $(".Small-picture img").css({ "border": "2px solid #FFF" });
                $(this).css({ "border": "2px solid #000" });//this获取的是当前鼠标移入的元素，设置黑色边框
                var imgsrc = $(this).attr("src");//获取当前鼠标移入元素的src属性值将其赋值给主图元素
                $(".datu").attr("src", imgsrc);
                $(".show-right img").attr("src", imgsrc);//将鼠标选中的图传给放大图元素的src属性
            });
            //鼠标移入产品主图时出现放大的细节图和小框
            $(".showcase").mouseenter(function () {
                $(".mark").show();
                $(".show-right").show();
            });


            //鼠标在产品主图移动事件
            $(".showcase").mousemove(function (e) {
                var mousex = e.pageX;//获取鼠标当前对于浏览器可视区的X坐标
                var mousey = e.pageY;
                var imgx = $(".showcase").offset().left;//获得产品主图对于文档的偏移坐标
                var imgy = $(".showcase").offset().top;
                //小框的left值是鼠标位移减去产品图元素偏移坐标减去小框宽度的一半，使鼠标保持位于小框的中间
                var boxleft = mousex - imgx - $(".mark").width() / 2;//计算小框对于产品主图元素的距离用来定位
                var boxtop = mousey - imgy - $(".mark").height() / 2;
                //鼠标移动小框位置跟着变化
                $(".mark").css({ "top": boxtop, "left": boxleft });
                //计算小框移动的最大范围
                var maxtop = $(".showcase").height() - $(".mark").height();
                var maxleft = $(".showcase").width() - $(".mark").width();
                //判断小框移动的边界
                if (boxtop <= 0) {
                    $(".mark").css("top", "0");
                } else if (boxtop > maxtop) {
                    $(".mark").css("top", maxtop);
                }
                if (boxleft <= 0) {
                    $(".mark").css("left", "0");
                } else if (boxleft > maxleft) {
                    $(".mark").css("left", maxleft);
                }
                //设置放大图的位置偏移量，获取小框偏移量乘放大倍数，注意！！！放大图偏移量应设置为负值
                var showleft = -$(".mark").position().left * 2;//position()方法返回当前元素相对于父元素的位置（偏移）
                var showtop = -$(".mark").position().top * 2;
                //此处获取小框偏移量不应该使用前面计算出来的boxtop和boxleft值，因可能会出现超出移动的边界
                $(".show-right img").css({ "left": showleft, "top": showtop });
            });
            //鼠标离开产品主图元素事件，此处使用mouseleave事件只有在鼠标指针离开被选元素时才会触发，mouseout鼠标指针离开被选元素和其任何子元素都会触发。
            $(".showcase").mouseleave(function () {
                $(".mark").hide();//小框隐藏
                $(".show-right").hide();//放大图隐藏
            });
            //------------------------------------------------------------------------------------------------------
            //点击购物车按钮 给其添加事件
            //  用事件委托的方法 

            $('.Shopping-Cart').on('click', '.Cart', function () {
                var ida = $(this).attr('id')
                console.log(ida)
                // console.log(id)
                //判断localStorage 中是否有 键/值  localStorage key = value
                // 键/值 是这样的形式 goods = [{code:'abc1',num:2},{code:'abc2',num:4}]
                // code相当于唯一ID, num的数量代表同一个商品被点击加入购物车的次数
                //判断本地存储是否有数据
                var id =$(this).attr('id')
        // console.log(id)
        //判断localStorage 中是否有 键/值  localStorage key = value
        // 键/值 是这样的形式 goods = [{code:'abc1',num:2},{code:'abc2',num:4}]
        // code相当于唯一ID, num的数量代表同一个商品被点击加入购物车的次数
        //判断本地存储是否有数据
        if(localStorage.getItem('goods')){
            var goodsArr = JSON.parse(localStorage.getItem('goods'))
        }else{
            var goodsArr = []
        }
          //判断当前选中商品是否在购物车中
          //自定义一个变量 hasGoods,假设此时还不存在这款商品 则为false

          var hasGoods = false

          //遍历本地存储
          $.each(goodsArr,function(index,item){
              //判断 当前点击的  是否已存在本地存储
              if(item.id===id){//如果商品在购物车中 num的数量++
                item.num++
                //自定义一个变量 hasGoods 执行到这里代表商品存在  
                hasGoods = true
                //如果已经遍历到存在没必要继续遍历下去
                return false  
                      
              }

          })

            //没有商品时
          if(!hasGoods){//如果没有商品则添加  重点这来是添加键/值给localStorage的
             // 这里的id是 上面var id= $(this).attr('id')来的
                 goodsArr.push({id:id,num:1})
          }
           //  设置更新本地的存储数据
           localStorage.setItem('goods',JSON.stringify(goodsArr))

           //弹出提示
        alert('添加购物车成功')

            })




        });
    </script>

    <!-- 获取地址栏的id -->
    <script>


    </script>







</body>

</html>